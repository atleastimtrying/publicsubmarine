<!DOCTYPE html>
<html lang="en-uk" dir="ltr">
<head>
  <meta charset="utf-8">
  <title>Public Submarine</title>
  <link href='style.css' rel='stylesheet' type='text/css'>
</head>
<body>
  <header>
    <h1>Public Submarine</h1>
    <h2>Exploring the depths of JS Events</h2>
    <nav>
      <a href='#about'>about</a>
      <a href='#code'>code</a>
      <a href='#author'>Author</a>
      <a href='#talk'>Talk</a>
    </nav>
  </header>
  <article>
    <section class='about'>
      <h2><a name="about">About</a></h2>
      <div>
        <h3>What is Public Submarine?</h3>
        <p>Public Submarine is a very simple publish subscribe library that makes use of a global JS object to handle all your custom events.</p>

        <h3>What is Pub Sub?</h3>
        <p>Pub Sub (short for public subscribe)(or the Observer pattern) is the process of tying specific functions to an 'event', a way of decoupling your objects allowing them to become more independent. An event is a string that when triggered by the library for all the events associated with it. This is also known as the 'observer pattern' in the gang of four book</p>
        <blockquote>
            One or more observers are interested in the state of a subject and register their interest with the subject by attaching themselves. When something changes in our subject that the observer may be interested in, a notify message is sent which calls the update method in each observer. When the observer is no longer interested in the subject's state, they can simply detach themselves. 
        </blockquote> 

        <h3>How do I use it?</h3>
        <p>Pub Sub is very simple to use, simply include the script tag pointing to our hosted version of Public Submarine or a local version downloaded from <a href='http://atleastimtrying.github.com/publicsubmarine/pubSub.js'>here</a>.</p>
        <p>Once you've included this in your javascript use the following three functions.</p> 

        <h4>subscribe to an event</h4>
        <p>Simple call the subscribe function passing in the name of your event as your first parameter and for your second parameter pass the callback function that you wish to be triggered.</p>
        <code>publicSubmarine.subscribe('an event', function(){console.log('event called')});</code>

        <h4>Unsubscribe to an event</h4>
        <p>To unsubscribe from an event pass in the name of your event for the first parameter and for the second parameter pass in the function (the same function) that you subscribed to the event with. It's at this point it becomes clear how useful naming your functions can be.</p>

        <code>publicSubmarine.unsubscribe('an event', function(){console.log('event called')});</code>

        <h4>Publish an event</h4>
        <p>To publish your event is very simple just pass in the name of your event to the publish function.</p>
        <code>publicSubmarine.publish('an event');</code>

        <p>That's all there is to it for the current version of Pub Sub. In the future I hope to be able to bind objects to an event that is published which will be received by the functions that are subscribed to it. Keepo an eye out for the next version of Public Submarine.</p>
      </div>
    </section>
    <section class='code'>
      <h2><a name="code">Code</a></h2>
      <p>Public Submarine as written in CoffeeScript and compiled in to Javascript. If you're editing the code I would thoroughly recommend using CoffeeScript. However, any changes made to the Javascript will also be reflected.</p>
      <p>P.S.Feel free to remove the ascii art :)</p>
      <div class='tabs'>
        <nav>
          <a href='#coffeescript' class='active'>CoffeeScript</a>
          <a href='#javascript'>JavaScript</a>
        </nav>
        <pre class='coffeescript'>
###
                     ___
                    /  _0
                    | |
                    | |
^^^^^^^^^^^^^^^^^^^^| |^^^^^^^^^^^^^^
-------------------/   \-------------
   P U B L I C   S U B M A R I N E
###

window.publicSubmarine =
  init: ->
    @events = {}

  publish: (label)->
    evnt() for evnt in @events[label] if @events[label]

  subscribe: (label, callback)->
    if @events[label]
      @events[label].push callback
    else
      @events[label] = [callback]

  unsubscribe: (label, callback)->
    if @events[label]
      position = @events[label].indexOf callback 
      @events[label].splice position,1 if position isnt -1

  surface: ->
    console.log @events

publicSubmarine.init()
        </pre>
        <pre class='javascript'>
// Generated by CoffeeScript 1.3.3

/*
                     ___
                    /  _0
                    | |
                    | |
^^^^^^^^^^^^^^^^^^^^| |^^^^^^^^^^^^^^
-------------------/   \-------------
   P U B L I C   S U B M A R I N E
*/


(function() {

  window.publicSubmarine = {
    init: function() {
      return this.events = {};
    },
    publish: function(label) {
      var evnt, _i, _len, _ref, _results;
      if (this.events[label]) {
        _ref = this.events[label];
        _results = [];
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          evnt = _ref[_i];
          _results.push(evnt());
        }
        return _results;
      }
    },
    subscribe: function(label, callback) {
      if (this.events[label]) {
        return this.events[label].push(callback);
      } else {
        return this.events[label] = [callback];
      }
    },
    unsubscribe: function(label, callback) {
      var position;
      if (this.events[label]) {
        position = this.events[label].indexOf(callback);
        if (position !== -1) {
          return this.events[label].splice(position, 1);
        }
      }
    },
    surface: function() {
      return console.log(this.events);
    }
  };

  publicSubmarine.init();

}).call(this);
        </pre>
      </div>
    </section>
    <section class='author'>
      <h2><a name="author">Author</a></h2>
      <p>Public Submarine was created and developed by <a href='http://andersfisher.com'>Anders Fisher</a>, a freelance Javascript Contractor working in and around East Anglia. Anders has been working for the last five years with a distinct focus on front end development. He is a big fan of the following technologies: coffeecript, query, rails, git, css3, haml, sublime text 2 and Google Chrome.</p>
      <p>Anders is constantly pushing himself to create new personal projects alongside his work for prominent local businesses. Always keen to hear about new projects and ideas, Anders tries to make time for interesting and engaging - and most of all useful - projects on the web.</p>
    </section>
    <section class='talk'>
      <h2><a name="talk">Talk</a></h2>
      <p>Pub Sub was inspired by some research done for a talk done at Front End Suffolk, a browser based user group in Ipswich, Suffolk, East Anglia. The slides for this talk are available online via the <a href='http://fesuffolk.co.uk'>FESuffolk website</a>. You can contact or follow <a href="http://twitter.com/fesuffolk">@FESuffolk</a> on Twitter.
    </section>
  </article>
  <footer>

  </footer>
  <script src='jquery.js'></script>
  <script src='jquery.scrollTo.js'></script>
  <script src='pubSub.js'></script>
  <script src='app.js'></script>
</body>
</html>