<!DOCTYPE html>
<html lang="en-uk" dir="ltr">
<head>
  <meta charset="utf-8">
  <title>Public Submarine</title>
  <link href='style.css' rel='stylesheet' type='text/css'>
</head>
<body>
  <header>
    <h1>Public Submarine</h1>
    <h2>Exploring the depths of JS Events</h2>
    <nav>
      <a href='#about'>about</a>
      <a href='#code'>code</a>
      <a href='#author'>Author</a>
      <a href='#talk'>Talk</a>
    </nav>
  </header>
  <article>
    <section class='about'>
      <h2><a name="about">About</a></h2>
      <div>
        <h3>What is Public Submarine?</h3>
        <p>Public Submarine is a very simple publish subcribe library that makes use of a global js object to handle all your custom events.</p>
        <h3>What is Pub Sub?</h3>
        <p>Pub Sub (or the Observer pattern) is a way of decoupling your objects allowing them to become more independent.</p>
        <h3>How do I use it?</h3>
        <p>subscribe to an event: publicSubmarine.subscribe('an event', function(){console.log('event called')});</p>
        <p>subscribe to an event: publicSubmarine.unsubscribe('an event', function(){console.log('event called')});</p>
        <p>subscribe to an event: publicSubmarine.publish('an event');</p>
      </div>
    </section>
    <section class='code'>
      <h2><a name="code">Code</a></h2>
      <div class='tabs'>
        <nav>
          <a href='#coffeescript' class='active'>CoffeeScript</a>
          <a href='#javascript'>JavaScript</a>
        </nav>
        <pre class='coffeescript'>
###
                     ___
                    /  _0
                    | |
                    | |
^^^^^^^^^^^^^^^^^^^^| |^^^^^^^^^^^^^^
-------------------/   \-------------
   P U B L I C   S U B M A R I N E
###

window.publicSubmarine =
  init: ->
    @events = {}

  publish: (label)->
    evnt() for evnt in @events[label] if @events[label]

  subscribe: (label, callback)->
    if @events[label]
      @events[label].push callback
    else
      @events[label] = [callback]

  unsubscribe: (label, callback)->
    if @events[label]
      position = @events[label].indexOf callback 
      @events[label].splice position,1 if position isnt -1

  surface: ->
    console.log @events

publicSubmarine.init()
        </pre>
        <pre class='javascript'>
// Generated by CoffeeScript 1.3.3

/*
                     ___
                    /  _0
                    | |
                    | |
^^^^^^^^^^^^^^^^^^^^| |^^^^^^^^^^^^^^
-------------------/   \-------------
   P U B L I C   S U B M A R I N E
*/


(function() {

  window.publicSubmarine = {
    init: function() {
      return this.events = {};
    },
    publish: function(label) {
      var evnt, _i, _len, _ref, _results;
      if (this.events[label]) {
        _ref = this.events[label];
        _results = [];
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          evnt = _ref[_i];
          _results.push(evnt());
        }
        return _results;
      }
    },
    subscribe: function(label, callback) {
      if (this.events[label]) {
        return this.events[label].push(callback);
      } else {
        return this.events[label] = [callback];
      }
    },
    unsubscribe: function(label, callback) {
      var position;
      if (this.events[label]) {
        position = this.events[label].indexOf(callback);
        if (position !== -1) {
          return this.events[label].splice(position, 1);
        }
      }
    },
    surface: function() {
      return console.log(this.events);
    }
  };

  publicSubmarine.init();

}).call(this);
        </pre>
      </div>
    </section>
    <section class='author'>
      <h2><a name="author">Author</a></h2>
      <p>Public Submarine was created and developed by <a href='http://andersfisher.com'>Anders Fisher</a>, a Javascript Contractor working in and around East Anglia.</p>
    </section>
    <section class='talk'>
      <h2><a name="talk">Talk</a></h2>
      <p>The slides for A recent talk on Pub Sub by Anders Fisher are available at <a href='http://pubsubtalk.herokuapp.com'>pubsubtalk.herokuapp.com</a>.
    </section>
  </article>
  <footer>

  </footer>
  <script src='jquery.js'></script>
  <script src='jquery.scrollTo.js'></script>
  <script src='pubSub.js'></script>
  <script src='app.js'></script>
</body>
</html>